#textdomain wesnoth-rtl

[scenario]
    id=EE_Secret_Bossfight
    name= _ "The Ghoul"
    map_data="{~add-ons/The_Rootless/maps/EE_Secret_Bossfight.map}"
    next_scenario=null
    victory_when_enemies_defeated=no

    {SCENARIO_MUSIC nunc_dimittis.ogg}
    {EXTRA_SCENARIO_MUSIC knalgan_theme.ogg}
    {EXTRA_SCENARIO_MUSIC frantic.ogg}

    {UNDERGROUND}
    #todo: add death messages for heroes
    {RECRUIT_UNIT_VARIATIONS 3 "Walking Corpse" dwarf}
    {RECRUIT_UNIT_VARIATIONS 4 "Walking Corpse" bat}
    {PLACE_IMAGE (scenery/rune2-glow.png) 4 9}
    {PLACE_IMAGE (scenery/rune4-glow.png) 31 5}

    [side]
        side=1
        controller=human
        {GOLD 80 80 80}
        {INCOME -102 -102 -102}
        village_gold=0
        team_name=WMG
        user_team_name= _ "Wesnoth Modders' Guild"
        flag=misc/wmg-flag-[1~3].png:150
        flag_icon=misc/wmg-icon.png
        recruit=""
        type=Royal Guard
        id=Knyght
        shroud=yes
        unrenamable=yes
        facing=nw
        name= _ "Lord Knightmare"
        x,y=17,17
        [modifications]
            {TRAIT_FEARLESS}
            {TRAIT_QUICK}
            [object]
                [effect]
                    apply_to=new_ability
                    [abilities]
                        [leadership]
                            id=inspire #stolen from THoT
                            value="(25 * (level - other.level + 1))"
                            cumulative=no
                            name= _ "inspire"
                            female_name= _ "female^inspire"
                            description= _ "This unit can inspire own units that are next to it, making them fight better. Adjacent own units of lower or equal level will deal 25% more damage plus 25% for each level they are below the inspiring unit."
                            special_note=_"The presence of this unit inspires own units next to it to deal more damage in combat, though this only applies to units of lower or equal level."
                            affect_self=no
                            [affect_adjacent]
                                [filter]
                                    formula="level <= other.level"
                                [/filter]
                            [/affect_adjacent]
                        [/leadership]
                    [/abilities]
                [/effect]
                [effect]
                    apply_to=image_mod
                    add=RC(magenta>black)
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks=1
                [/effect]
            [/object]
        [/modifications]
        canrecruit=yes
    [/side]

    [side]
        side=2
        type=Ghast
        id=Norcen
        name= _ "Norcen"
        team_name=Ghouls
        user_team_name=_"Ghouls"
        controller=ai
        shroud=yes
        facing=se
        {GOLD 180 240 290}
        {INCOME 2 4 6}
        canrecruit=yes
        color=white
        recruit="Ghoul,RTL Shrieker"
        x,y=19,8
        [modifications]
            [object]
                [effect]
                    apply_to=remove_advancement
                    amlas=amla_default
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase_total=935
                [/effect]
            [/object]
            [object]
                id=fear_of_tentacles
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        castle={UNREACHABLE}
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/side]

    [side]
        side=3
        type=Soulless
        variation=dwarf
        id=Dwarf_Corpse
        team_name=Ghouls
        user_team_name=_"Ghouls"
        controller=ai
        shroud=yes
        facing=se
        {GOLD 80 100 140}
        {INCOME 2 3 4}
        canrecruit=yes
        color=white
#ifdef EASY
        recruit="Walking Corpse,Skeleton,Skeleton Archer,Blood Bat"
#else
        recruit="Walking Corpse,Skeleton,Skeleton Archer,Blood Bat,Revenant,Bone Shooter,Deathblade"
#endif
        x,y=4,9
    [/side]

    [side]
        side=4
        type=Soulless
        variation=bat
        id=Bat_Corpse
        team_name=Ghouls
        user_team_name=_"Ghouls"
        controller=ai
        shroud=yes
        facing=se
        {GOLD 80 100 140}
        {INCOME 2 3 4}
        canrecruit=yes
        color=white
#ifdef EASY
        recruit="Walking Corpse,Skeleton,Skeleton Archer,Blood Bat"
#else
        recruit="Walking Corpse,Skeleton,Skeleton Archer,Blood Bat,Revenant,Bone Shooter,Deathblade"
#endif
        x,y=31,5
    [/side]

#define WEAPON_SPECIAL_RANDOM
    [dummy]
        id=rtl_boredom
        name= _ "random"
        description= _ "The effects of this weapon are bizzarely random."
        special_note= _ "The effects of this weapon are bizzarely random."
    [/dummy]
#enddef

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            side=1
            x,y=4,9
        [/filter]

            [message]
                speaker=unit
                message= _ "<span font-style='italic'>The Wrath of Yumi. DO NOT TOUCH!</span>

I wonder what this rune does."
            [/message]

            {NOTRAIT_UNIT 1 "Tentacle of the Deep" 14 4}
            {NOTRAIT_UNIT 1 "Tentacle of the Deep" 16 4}
            {NOTRAIT_UNIT 1 "Tentacle of the Deep" 17 4}
            {NOTRAIT_UNIT 1 "Tentacle of the Deep" 18 2}
            {NOTRAIT_UNIT 1 "Tentacle of the Deep" 19 1}

            [redraw]
                clear_shroud=yes
            [/redraw]

            [remove_item]
                x,y=4,9
            [/remove_item]

            {PLACE_IMAGE (scenery/rune2.png) 4 9}

    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x,y=31,5
        [/filter]
        [filter_condition]
            [not]
                [have_unit]
                    side=1
                    type=RTL Portal,Peasant
                [/have_unit]
            [/not]
        [/filter_condition]

        [message]
            speaker=unit
            message= _ "There is a magic circle there. It summons a powerful ally, but only if you praise the best mainline campaign there is."
        [/message]

        [message]
            speaker=unit
            [text_input]
                variable=code
                text="Northern Rebirth is the pinnacle of campaign design."
            [/text_input]
        [/message]
        [if]  
            [variable]  
                name=code  
                equals="Northern Rebirth is the pinnacle of campaign design."
            [/variable]
                [then]
                    [move_unit]
                        x,y=31,5
                        to_x=31
                        to_y=6
                        clear_shroud=yes
                    [/move_unit]
                    [unit]
                        side=1
                        type=RTL Portal
                        x,y=31,5
                    [/unit]

                    [remove_item]
                        x,y=31,5
                    [/remove_item]

                    {PLACE_IMAGE (scenery/rune4.png) 31 5}
                [/then] 
            [else]
                [message]
                    speaker=unit
                    message= _ "That doesn't seem to be working."
                [/message]
            [/else]
        [/if]

    [/event]

    [event]
        first_time_only=no
        name=new turn
        [set_variable]  
            name=dalas_light
            rand=1..8
        [/set_variable]
        [if]
            [variable]
                name=jeremias_miss
                equals=1
            [/variable]
            [then]
                {VARIABLE jeremias_miss 2}
            [/then]
        [/if]
        [if]
            [have_unit]
                id=Dalas
            [/have_unit]
            [and]
                [variable]
                    name=dalas_light
                    equals=8
                [/variable]
            [/and]
            [then]
                [repeat]
                    times=8
                    [do]
                        [delay]
                            time=100
                        [/delay]
                        {MODIFY_UNIT id=Dalas halo ""}
                        [delay]
                            time=50
                        [/delay]
                        {MODIFY_UNIT id=Dalas halo "halo/illuminates-aura.png"}
                    [/do]
                [/repeat]
            [/then]
        [/if]
        {CLEAR_VARIABLE dalas_light}
        [if]
            [have_unit]
                id=ForestDragon
            [/have_unit]
            [then]
                [if]
                    [have_unit]
                        id=Spartan
                    [/have_unit]
                    [then]
                    [/then]
                    [else]
                        [store_unit]
                            [filter]
                                id=ForestDragon
                            [/filter]
                            variable=forestdragon
                        [/store_unit]
                        {NAMED_LOYAL_UNIT 1 (Spearman) $forestdragon.x| $forestdragon.y| (Spartan) ( _ "Spartan")}
                        {CLEAR_VARIABLE forestdragon}
                    [/else]
                [/if]
            [/then]
            [else]
            [/else]
        [/if]
        [if]
            [have_unit]
                type=RTL Portal
            [/have_unit]
            [then]
                [set_variable]  
                    name=code 
                    rand=1..3 
                [/set_variable]
                [if]  
                    [variable]  
                        name=code  
                        not_equals=3 
                    [/variable]  
                    [then]  
                        [transform_unit]
                            type=RTL Portal
                            transform_to=Peasant
                        [/transform_unit]
                        [heal_unit]
                            [filter]
                                type=Peasant
                            [/filter]
                            amount=full
                        [/heal_unit]
                        [modify_unit]
                            [filter]
                                type=Peasant
                            [/filter]
                            {TRAIT_FEARLESS}
                            name=Tallin
                            unrenamable=yes
                            [object]
                                [effect]
                                    apply_to=image_mod
                                    add=RC(magenta>purple)
                                [/effect]
                                [effect]
                                    apply_to=attack
                                    range=ranged
                                    set_damage=1111
                                    set_description=deghouler
                                [/effect]
                            [/object]
                        [/modify_unit]
                     [/then] 
                [/if]
            [/then]
        [/if]
    [/event]

    [event]
        name=sighted
        [filter]
            id=Norcen
        [/filter]
        [filter_second]
            side=1
            [not]
                type=Tentacle of the Deep
            [/not]
        [/filter_second]
        [message]
            speaker=Norcen
            message= _ "Impossible! How could they get to me through my unbeatable ghouls? It's time to call the reserves!"
        [/message]
        [allow_recruit]
            side=2
            type=Merman Citizen
        [/allow_recruit]
        [disallow_recruit]
            side=2
            type=Ghoul,RTL Shrieker
        [/disallow_recruit]
        [gold]
            side=2
            amount=90
        [/gold]
        [remove_object]
            object_id=fear_of_tentacles
        [/remove_object]
    [/event]

    [event]
        name=unit placed
        first_time_only=no

        [filter]
            type=Tentacle of the Deep
        [/filter]

        [object]
            [effect]
                apply_to=attack
                range=melee
                increase_damage=3
                increase_attacks=1
            [/effect]
            [effect]
                apply_to=hitpoints
                increase_total=+50%
                heal_full=yes
            [/effect]
        [/object]

    [/event]

    [event]
        name=prestart

        [unit]
            name=Jeremiáš
            id=Jeremias
            unrenamable=yes
            type=Master at Arms
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_FEARLESS}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=new_attack
                        name=authors_boredom
                        description= _ "author's boredom"
                        icon=icons/scroll_red.png
                        type=arcane
                        range=ranged
                        damage=0
                        number=1
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                            {WEAPON_SPECIAL_RANDOM}
                            {WEAPON_SPECIAL_ATTACK_EFFECT}
                        [/specials]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=authors_boredom
                            [/filter_attack]
                            {HALO_FRAME_SAURIAN}
                            {MISSILE_FRAME_ICE}
                            start_time=-200
                        [/attack_anim]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Forest Dragon"
            id=ForestDragon
            unrenamable=yes
            type=Inferno Drake
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_FEARLESS}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            [dummy]
                                id=rtl_spartan
                                name= _ "summon Spartan"
                                description= _ "If Forest Dragon doesn't have Spartan at his side when the turn starts, he summons him."
                            [/dummy]
                        [/abilities]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [standing_anim]
                            start_time=0
                            [frame]
                                image="terrain/forest/great-tree.png"
                            [/frame]
                        [/standing_anim]
                    [/effect]
                    [effect]
                        apply_to=image_mod
                        add=RC(magenta>green)
                    [/effect]
                    [effect]
                        apply_to=movement
                        increase=3
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name=Mechanical
            id=Mechanical
            unrenamable=yes
            type=Great Troll #todo: sprite changes in 1.17
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=new_attack
                        name=rtl_oink
                        description=_"squeals of Sir Swine"
                        icon="data/core/images/attacks/tusk.png"
                        type=blade
                        range=ranged
                        damage=7
                        number=4
                        [specials]
                            [dummy]
                                id=rtl_swine
                                name= _ "hamification"
                                description= _ "A unit killed by Mechanical's attack turns into a piglet."
                                special_note= _ "A unit killed by Mechanical's attack turns into a piglet."
                            [/dummy]
                        [/specials]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=rtl_oink
                            [/filter_attack]
                            start_time=-445
                            missile_start_time=-150
                            [missile_frame]
                                duration=150
                                image="projectiles/icemissile-n-1.png"
                                image_diagonal="projectiles/icemissile-ne-1.png"
                            [/missile_frame]
                            [frame]
                                image="units/trolls/great-troll-defend1.png:65"
                            [/frame]
                            [frame]
                                image="units/trolls/great-troll-defend2.png:[400]"
                            [/frame]
                            {SOUND:HIT_AND_MISS tusker-hit.ogg tusker-hit.ogg -230}
                        [/attack_anim]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Green Scarab"
            id=GreenScarab
            unrenamable=yes
            type=Horned Scarab
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_HEALTHY}
                {TRAIT_LOYAL}
                [object]
                    id=greenscarab_upgrade
                    [effect]
                        apply_to=image_mod
                        add=RC(magenta>green)
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_attacks=1
                    [/effect]
                    [effect]
                        apply_to=hitpoints
                        increase_total=100%
                    [/effect]
                    [effect]
                        apply_to=movement
                        increase=2
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_CURES}
                        [/abilities]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Mirion147"
            id=Mirion
            unrenamable=yes
            type=Orcish Warlord
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=movement_costs
                        replace=yes
                        [movement_costs]
                            deep_water=1
                            shallow_water=1
                            swamp_water=1
                            reef=2
                        [/movement_costs]
                    [/effect]
                    [effect]
                        apply_to=defense
                        replace=yes
                        [defense]
                            deep_water=50
                            shallow_water=40
                            swamp_water=40
                            reef=30
                        [/defense]
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            [dummy]
                                id=rtl_upriver
                                name= _ "river traveller"
                                description= _ "The journey up the River Bork has increased Mirion's swimming abilities, allowing him to navigate the water better than other orcs."
                            [/dummy]
                        [/abilities]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Durmoth"
            id=Durmoth
            unrenamable=yes
            type=Orcish Sovereign
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_UNDEAD}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            [dummy]
                                id=rtl_necromancy
                                name= _ "necromancy"
                                description= _ "Durmoth may look like an orc, but his true love is for the undead. He can create skeletons from the remains scattered across the map."
                            [/dummy]
                        [/abilities]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Dalas"
            id=Dalas
            unrenamable=yes
            type=Mage of Light
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_FEARLESS}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=hitpoints
                        increase_total=50%
                    [/effect]
                    [effect]
                        apply_to=movement
                        increase=1
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
            name="Hejnewar"
            id=Hejnewar
            unrenamable=yes
            type=Dread Bat
            x=recall
            y=recall
            side=1
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_LOYAL}
                [object]
                    [effect]
                        apply_to=image_mod
                        add=RC(magenta>black)
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=2
                    [/effect]
                    [effect]
                        apply_to=hitpoints
                        increase_total=60%
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=rtl_pr
                        description=_"pull request"
                        icon="data/core/images/icons/letter_and_ale.png"
                        type=arcane
                        range=ranged
                        damage=0
                        number=1
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                            [dummy]
                                id=rtl_rebalance
                                name= _ "rebalancing"
                                description= _ "A unit type hit by Hejne's attack is nerfed until the end of the turn."
                                special_note= _ "A unit type hit by Hejne's attack is nerfed until the end of the turn."
                            [/dummy]
                        [/specials]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=rtl_pr
                            [/filter_attack]
                            {MISSILE_FRAME_WAIL}
                            start_time=-200
                        [/attack_anim]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {PLACE_IMAGE (misc/wmg.png) 16 17}
        {PLACE_IMAGE (items/bones.png) 19 16}
        {PLACE_IMAGE (items/bones.png) 10 18}
        {PLACE_IMAGE (items/bones.png) 19 11}
        {PLACE_IMAGE (items/bones.png) 11 8}
        {PLACE_IMAGE (items/bones.png) 2 7}
        {PLACE_IMAGE (items/bones.png) 7 2}
        {PLACE_IMAGE (items/bones.png) 14 3}
        {PLACE_IMAGE (items/bones.png) 29 13}
        {PLACE_IMAGE (items/bones.png) 25 9}
        {PLACE_IMAGE (items/bones.png) 26 4}
        {PLACE_IMAGE (items/bones.png) 21 10}
        {PLACE_IMAGE (items/leather-pack.png) 26 6}
        {PLACE_IMAGE (items/potion-grey.png) 11 10}
        {PLACE_IMAGE (items/potion-grey.png) 6 4}
        {PLACE_IMAGE (items/potion-grey.png) 15 2}
        {PLACE_IMAGE (items/potion-grey.png) 22 6}
        {PLACE_IMAGE (items/potion-grey.png) 27 11}
        {PLACE_IMAGE (items/potion-grey.png) 25 2}
    
    [/event]

    #define HEALTH_POTION_GREY X Y
    [event]
        name=moveto
        first_time_only=no
        id=health_potion_{X}_{Y}
        [filter]
            side=1
            x={X}
            y={Y}
        [/filter]
        [message]
            speaker=unit
            caption=""
            image="wesnoth-icon.png"
            male_message= _ "What should $unit.name| do with the the potion?"
            female_message= _ "What should female^Should $unit.name| do with the the potion?"
            [option]
                label= _ "Drink the potion"
                [command]
                    [remove_item]
                        x={X}
                        y={Y}
                    [/remove_item]
                    [sound]
                        name=potion.ogg
                    [/sound]
                    [heal_unit]
                        [filter]
                            x={X}
                            y={Y}
                        [/filter]
                    [/heal_unit]
                    [remove_event]
                        id=health_potion_{X}_{Y}
                    [/remove_event]
                    [fire_event]
                        name=why_is_the_potion_grey
                    [/fire_event]
                [/command]
            [/option]
            [option]
                label= _ "Nothing"
                [command]
                    [allow_undo][/allow_undo]
                [/command]
            [/option]
        [/message]
    [/event]
#enddef

    {HEALTH_POTION_GREY 11 10}
    {HEALTH_POTION_GREY 6 4}
    {HEALTH_POTION_GREY 15 2}
    {HEALTH_POTION_GREY 22 6}
    {HEALTH_POTION_GREY 27 11}
    {HEALTH_POTION_GREY 25 2}


#define NECRO_DURMOTH X Y
    [event]
        name=enter_hex
        [filter]
            id=Durmoth
            x={X}
            y={Y}
        [/filter]
        [cancel_action]
        [/cancel_action]
        [set_variable]  
            name=durmoth_skeleton
            rand="Skeleton","Skeleton Archer"
        [/set_variable]
        [remove_item]
            x={X}
            y={Y}
        [/remove_item]
        [sound]
            name=magic-dark.ogg
        [/sound]
        [animate_unit]
            [filter]
                id=Durmoth
            [/filter]
            flag=leading
        [/animate_unit]
        [unit]
            type=$durmoth_skeleton
            side=1
            x=$unit.x
            y=$unit.y
            moves=0
            placement=map
            passable=yes
            attacks_left=0
        [/unit]
        {CLEAR_VARIABLE durmoth_skeleton}
    [/event]
#enddef

    {NECRO_DURMOTH 19 16}
    {NECRO_DURMOTH 10 18}
    {NECRO_DURMOTH 19 11}
    {NECRO_DURMOTH 11 8}
    {NECRO_DURMOTH 2 7}
    {NECRO_DURMOTH 7 2}
    {NECRO_DURMOTH 14 3}
    {NECRO_DURMOTH 29 13}
    {NECRO_DURMOTH 25 9}
    {NECRO_DURMOTH 26 4}
    {NECRO_DURMOTH 21 10}

    [event]
        name=start

        [message]
            speaker=narrator
            image="wesnoth-icon.png"
            message= _ "The campaign is over! Since you managed to find the ghoul easter egg in the fourth scenario, you can now play this short bonus. It has nothing to do with the story of Arshag and his friends and was made purely for fun."
            [option]
                label= _ "Yes, I want to play the bonus scenario!"
                [command]
                    [message]
                        speaker=narrator
                        image=wesnoth-icon.png
                        message= _ "Once upon a time, in the spring of 2022, a group of strange creatures founded the <i>Wesnoth Modders' Guild</i>."
                    [/message]
            
                    [message]
                        speaker=narrator
                        image=wesnoth-icon.png
                       message= _ "As the guild grew, it recruited new members. But one of them had ulterior motives.
            
Norcen came not only to create campaigns, but also to promote what he considered to be the coolest units in the game, the ghouls."
                    [/message]
            
                    [message]
                       speaker=Knyght
                       message= _ "Norcen has finally sunk to the depths of madness. He's already created fifteen new species of ghoul and is now working on a sixteenth, which he says screams terribly."
                    [/message]
            
                    [message]
                       speaker=Knyght
                       message= _ "As much as I regret it, this entire cave must be purged! I'll get some of the other guild members to help me."
                    [/message]
            
                    [disallow_end_turn]
                        reason= _ "Lord Knightmare needs 4 friends to help him fight Norcen."
                    [/disallow_end_turn]
            
                    [objectives]
                        [objective]
                            description= _ "Defeat Norcen, the ghoulest of ghouls"
                            condition=win
                            [show_if]
                                [variable]
                                    name=turn_number
                                    greater_than=1
                                [/variable]
                            [/show_if]
                        [/objective]
            
                        [objective]
                            description= _ "Recall 4 WMG members to help you"
                            condition=win
                            [show_if]
                                [variable]
                                    name=turn_number
                                    equals=1
                                [/variable]
                            [/show_if]
                        [/objective]
            
                        [objective]
                            description= _ "Death of Lord Knightmare"
                            condition=lose
                        [/objective]
            
                    [/objectives]
                [/command]
            [/option]
            [option]
                label= _ "Not now, maybe another time."
                [command]
                    [endlevel]
                        result=victory
                        bonus=no
                        {NEW_GOLD_CARRYOVER 0}
                        end_text="Thank you for playing"
                    [/endlevel]
                [/command]
            [/option]
        [/message]

    [/event]

    [event]
        name=unit placed
        first_time_only=no
        [filter]
            side=1
        [/filter]
        {VARIABLE_OP members_recalled add 1}
        [if]
            [variable]
                name=members_recalled
                equals=5 #since Knyght is automatically placed as a leader
            [/variable]
            [then]
                {CLEAR_VARIABLE members_recalled}
                [allow_end_turn]
                [/allow_end_turn]
            [/then]
        [/if]
    [/event]

#define INTRODUCTION_MEMBER ID MESSAGE
    [event]
        name=unit placed
        [filter]
            id={ID}
        [/filter]
        [message]
            speaker={ID}
            message= _ {MESSAGE}
         [/message]
    [/event]
#enddef

    {INTRODUCTION_MEMBER Jeremias "I am the creator of this campaign, including this wacky part.

Thanks for playing it btw. You might regret it yet."}
    {INTRODUCTION_MEMBER ForestDragon "I am one of the creators of <i>Great Steppe Era</i> and the author of the upcoming <i>Spartan</i>, a replayable roguelike RPG campaign. I've also worked on other campaigns like <i>Rage (16+)</i> and various mods."}
    {INTRODUCTION_MEMBER Mechanical "I'm Mechanical, creator of Toruk sprites for <i>The Rootless</i>, one of the authors of <i>Great Steppe Era</i>. I've worked on the drake campaign <i>Rage (16+)</i> and created the brand new orcish campaign <i>Dirty Blood</i>."}
    {INTRODUCTION_MEMBER GreenScarab "I am GreenScarab and I have created several Wesnoth campaigns: <i>Born to Live</i>, <i>Horn of Faith</i>, <i>Dream in the Sand</i> and <i>Rustling in the Wind</i>."}
    {INTRODUCTION_MEMBER Durmoth "I'm Durmoth, creator of the <i>Deception</i> orc campaign and <i>rps-units</i> pack."}
    {INTRODUCTION_MEMBER Mirion "I'm Mirion, the man behind the orcish campaign <i>Up the River Bork</i>."}
    {INTRODUCTION_MEMBER Dalas "I'm Dalas, who reworked the <i>Eastern Invasion</i> campaign for Wesnoth 1.18."}
    {INTRODUCTION_MEMBER Hejnewar "I'm Hejnewar, dev who does the balancing of the game, creator of <i>Mercenaries</i>, <i>Under the Burning Suns But Better</i> and other modifications."}

    [event]
        name=last breath
        first_time_only=no
        [filter]
            type_adv_tree=Peasant
            name=Tallin
            [not]
                id=Spartan
            [/not]
        [/filter]
        [remove_item]
            x,y=31,5
        [/remove_item]

        {PLACE_IMAGE (scenery/rune4-glow.png) 31 5}
    [/event]

    [event]
        name=last breath
        [filter]
            id=Norcen
        [/filter]
        
        [if]
            [have_unit]
                side=1
                [not]
                    id=Knyght
                [/not]
            [/have_unit]
            [then]
                [message]
                    speaker=Norcen
                    message= _ "What is dead may never die."
                [/message]

                [message]
                    side=1
                    [not]
                        id=Knyght
                    [/not]
                    message= _ "The writing got so bad that it now quotes The Game of Thrones. Just end our suffering already!"
                [/message]
        
                [message]
                    speaker=Knyght
                    message= _ "Stop crying like a baby. This is a non-canon adventure specifically designed to make us all look good."
                [/message]
            [/then]
        [/if]

        [message]
            speaker=Norcen
            message= _ "This won't stop me. One day, the ghouls will rule Wesnoth."
        [/message]

        [message]
            speaker=Knyght
            message= _ "But it will not be this day."
        [/message]

        [kill]
            id=Norcen
            animate=yes
        [/kill]

        [message]
            speaker=narrator
            message= _ "A huge thank you to all the members of the Wesnoth Modders' Guild who contributed to the creation of this campaign.
            
Norcen is a ghoul lover and creator of the upcoming <i>Dusk Over Alden Cove</i> campaign.

Lord Knightmare is a developer of Wesnoth and creator of many, many UMCs. He's the one who advised me to use Lord Logalmier as the main villain!"
            image=wesnoth-icon.png
        [/message]

        [endlevel]
            result=victory
        [/endlevel]
    [/event]

    [event] #Mech turns enemies into pigs
        first_time_only=no
        name=die
        [filter_second]
            id=Mechanical
        [/filter_second]
        [filter_second_attack]
            name=rtl_oink
        [/filter_second_attack]
        [kill]
            id=$unit.id
        [/kill]
        {LOYAL_UNIT 1 (Piglet) $unit.x| $unit.y|}
    [/event]

    [event]
        name=attacker misses

        [filter]
            id=Jeremias
        [/filter]

        [filter_attack]
            name=crossbow
        [/filter_attack]
                
        [message]
            speaker=Jeremias
            message= _ "Goddamn RNG! Why do I have to keep reloading the last turn to finally get a hit?

Screw it, it's my campaign."
        [/message]

        [modify_unit]
            [filter]
                id=Jeremias
            [/filter]
            [object]
                [effect]
                    apply_to=attack
                    name=crossbow
                    increase_attacks=1
                [/effect]
            [/object]
        [/modify_unit]

        {VARIABLE jeremias_miss 1}

        [message]
            speaker=narrator
            message= _ "Jeremiáš can now attack with his crossbow twice per turn."
            image=wesnoth-icon.png
        [/message]
    [/event]

    [event]
        name=attacker misses

        [filter]
            id=Jeremias
        [/filter]

        [filter_attack]
            name=crossbow
        [/filter_attack]

        [filter_condition]
            [variable]
                name=jeremias_miss
                equals=2
            [/variable]
        [/filter_condition]
                
        [message]
            speaker=Jeremias
            message= _ "Why does the crossbow keep missing? Players will think I can't shoot it."
        [/message]

        [modify_unit]
            [filter]
                id=Jeremias
            [/filter]
            [object]
                [effect]
                    apply_to=attack
                    name=crossbow
                    [set_specials]
                        mode=append
                        {WEAPON_SPECIAL_MARKSMAN}
                    [/set_specials]
                [/effect]
            [/object]
        [/modify_unit]

        {CLEAR_VARIABLE jeremias_miss}

        [message]
            speaker=narrator
            message= _ "Jeremiáš gets the <i>marksman</i> special with his crossbow."
            image=wesnoth-icon.png
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            id=Mirion
            x,y=17,11
        [/filter]
        [message]
            speaker=Mirion
            message= _ "I'll make more bows out of this whole forest!"
        [/message]
        [modify_unit]
            [filter]
                id=Mirion
            [/filter]
            [object]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks=3
                [/effect]
            [/object]
        [/modify_unit]
        {MODIFY_TERRAIN Uue 17 11}
    [/event]

    [event]
        name=moveto
        [filter]
            id=GreenScarab
            x,y=26,6
        [/filter]
        [remove_item]
            x,y=26,6
        [/remove_item]
        [unit]
            type=Dwarvish Guardsman
            unrenamable=yes
            id=Modome
            name="Modome"
            side=1
            x,y=26,6
            moves=0
            placement=map
            passable=yes
            attacks_left=0
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [message]
            speaker=Modome
            message= _ "Greetings, creator! Where's Nemee?"
        [/message]
        [message]
            speaker=GreenScarab
            message= _ "You're confusing the campaign you're in. You better help me kill Norcen the Ghoul."
        [/message]
    [/event]

    [event]
        name=attacker hits
        first_time_only=no

        [filter_second]
            [not]
                id=Norcen
            [/not]
        [/filter_second]

        [filter_attack]
            name=rtl_pr
        [/filter_attack]

        [set_variable]  
            name=hejne_melee_dmg
            rand=-3,-2,-2,-1,-1,1,-25%,-50%,50%
        [/set_variable]
        [set_variable]  
            name=hejne_melee_strikes
            rand=-2,-1,-1,1,2,-50%,-50%,50%
        [/set_variable]
        [set_variable]  
            name=hejne_ranged_dmg
            rand=-3,-2,-2,-1,-1,1,-25%,-50%,50%
        [/set_variable]
        [set_variable]  
            name=hejne_ranged_strikes
            rand=-2,-1,-1,1,2,-50%,-50%,50%
        [/set_variable]
        [set_variable]  
            name=hejne_alignment
            rand=lawful,liminal,neutral,chaotic
        [/set_variable]
        [set_variable]  
            name=hejne_blade
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_pierce
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_impact
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_fire
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_cold
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_arcane
            rand=60..200
        [/set_variable]
        [set_variable]  
            name=hejne_hitpoints
            rand=-50%,-25%,-25%,-25%,25%,50%
        [/set_variable]

        [modify_unit]
            [filter]
                type=$second_unit.type
            [/filter]
            [object]
                duration=turn
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage=$hejne_melee_dmg
                    increase_attacks=$hejne_melee_strikes
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage=$hejne_ranged_dmg
                    increase_attacks=$hejne_ranged_strikes
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=yes
                    [resistance]
                        blade=$hejne_blade
                        pierce=$hejne_pierce
                        fire=$hejne_fire
                        impact=$hejne_impact
                        arcane=$hejne_arcane
                        cold=$hejne_cold
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase=$hejne_hitpoints
                [/effect]
                [effect]
                    apply_to=alignment
                    set=$hejne_alignment
                [/effect]
            [/object]
        [/modify_unit]

        {CLEAR_VARIABLE hejne_melee_dmg}
        {CLEAR_VARIABLE hejne_melee_strikes}
        {CLEAR_VARIABLE hejne_ranged_dmg}
        {CLEAR_VARIABLE hejne_ranged_strikes}
        {CLEAR_VARIABLE hejne_alignment}
        {CLEAR_VARIABLE hejne_hitpoints}
        {CLEAR_VARIABLE hejne_blade}
        {CLEAR_VARIABLE hejne_pierce}
        {CLEAR_VARIABLE hejne_impact}
        {CLEAR_VARIABLE hejne_fire}
        {CLEAR_VARIABLE hejne_cold}
        {CLEAR_VARIABLE hejne_arcane}

        [floating_text]
            x=$second_unit.x
            y=$second_unit.y
            text= _ "$second_unit.type| rebalanced!"
        [/floating_text]

    [/event]

    [event]
        name=attacker hits
        first_time_only=no

        [filter_second]
            [not]
                id=Norcen
            [/not]
        [/filter_second]

        [filter_attack]
            name=authors_boredom
        [/filter_attack]

        [set_variable]  
            name=random_stuff
            rand=10..10
        [/set_variable]

        [switch]
            variable=random_stuff
            [case]
                value=1
                [message]
                    speaker=Jeremias
                    message= _ "It's not fair to pick on the weak.

This enemy looks really pathetic. I'll help him out a little."
                [/message]
                [repeat]
                    times=5
                    [do]
                        {ADVANCE_UNIT id=$second_unit.id| ""}
                    [/do]
                [/repeat]
            [/case]
            [case]
                value=2
                [message]
                    speaker=Jeremias
                    message= _ "Just die already."
                [/message]
                [kill]
                    id=$second_unit.id
                    animate=yes
                [/kill]
            [/case]
            [case]
                value=3
                [message]
                    speaker=Jeremias
                    message= _ "There's so many undead! It's so repetitive."
                [/message]
                [set_variable]  
                    name=random_stuff
                    rand="Pikeman","Orcish Crossbowman","Gryphon Master","Bandit","Drake Thrasher","Dune Sunderer","Elvish Lady","Saurian Oracle","Elder Wose"
                [/set_variable]
                [transform_unit]
                    id=$second_unit.id
                    transform_to=$random_stuff
                [/transform_unit]
                [heal_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                [/heal_unit]
            [/case]
            [case]
                value=4
                [message]
                    speaker=Jeremias
                    message= _ "*in mocking voice* <i>I am Delfafador the Great. Prepare to die!</i>"
                [/message]
                [modify_unit]
                    [filter]
                        id=Jeremias
                    [/filter]
                    [object]
                        id=temp_lightning
                        [effect]
                            apply_to=new_attack
                            name=""
                            description= _ ""
                            icon=attacks/lightning.png
                            type=fire
                            range=ranged
                            [specials]
                                {WEAPON_SPECIAL_MAGICAL}
                            [/specials]
                            damage=0
                            number=1
                        [/effect]
                        [effect]
                            apply_to=new_animation
                            id=delfa_1
                            [attack_anim]
                                [filter_attack]
                                    type=fire
                                [/filter_attack]
                                {LIGHTNING_BOLT 1}
                                {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -200}
                            [/attack_anim]
                        [/effect]
                        [effect]
                            apply_to=new_animation
                            id=delfa_2
                            [attack_anim]
                                [filter_attack]
                                    type=fire
                                [/filter_attack]
                                {LIGHTNING_BOLT 2}
                                {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -200}
                            [/attack_anim]
                        [/effect]
                        [effect]
                            apply_to=new_animation
                            id=delfa_3
                            [attack_anim]
                                [filter_attack]
                                    type=fire
                                [/filter_attack]
                                {LIGHTNING_BOLT 3}
                                {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -200}
                            [/attack_anim]
                        [/effect]
                    [/object]
                [/modify_unit]
                [animate_unit]
                    flag=attack
                    hits=kill
                    [primary_attack]
                        type=fire
                    [/primary_attack]
                    [facing]
                        x=$second_unit.x
                        y=$second_unit.y
                    [/facing]
                [/animate_unit]
                [harm_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    animate=yes
                    damage_type=fire
                    amount=45
                    fire_event=yes
                [/harm_unit]
                [remove_object]
                    object_id=temp_lightning
                [/remove_object]
            [/case]
            [case]
                value=5
                [message]
                    speaker=Jeremias
                    message= _ "How can I hit you when you defend yourself all the time?"
                [/message]
                [modify_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    [object]
                        [effect]
                            apply_to=remove_attacks
                        [/effect]
                    [/object]
                [/modify_unit]
            [/case]
            [case]
                value=6
                [message]
                    speaker=Jeremias
                    message= _ "Come to the Dark Side. We have cookies."
                [/message]
                [modify_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    side=1
                [/modify_unit]
            [/case]
            [case]
                value=7
                [message]
                    speaker=Jeremias
                    message= _ "Stop right there, criminal scum!"
                [/message]
                {PLACE_IMAGE ("$second_unit.image|~RC(magenta>white)") $second_unit.x $second_unit.y}
                {PLACE_IMAGE ("items/cage.png") $second_unit.x $second_unit.y}
                [kill]
                    id=$second_unit.id
                    animate=no
                    fire_event=yes
                [/kill]
            [/case]
            [case]
                value=8
                [message]
                    speaker=Jeremias
                    message= _ "Let's scare you player a little.

Yes, you behind that screen."
                [/message]
                [transform_unit]
                    id=$second_unit.id
                    transform_to=Yeti
                [/transform_unit]
                [heal_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                [/heal_unit]
                [modify_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    [object]
                        [effect]
                            apply_to=attack
                            range=melee
                            [set_specials]
                                mode=append
                                {WEAPON_SPECIAL_BERSERK}
                            [/set_specials]
                        [/effect]
                        [effect]
                            apply_to=resistance
                            replace=yes
                            [resistance]
                                blade=500
                                pierce=500
                                fire=500
                                impact=500
                                arcane=500
                                cold=500
                            [/resistance]
                        [/effect]
                    [/object]
                [/modify_unit]
            [/case]
            [case]
                value=9
                [message]
                    speaker=Jeremias
                    message= _ "You're so old you look like you still remember anime Li'sar."
                [/message]
                [modify_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    {TRAIT_AGED}
                [/modify_unit]
            [/case]
            [case]
                value=10
                [message]
                    speaker=second_unit
                    message= _ "You have no power here, fool!"
                [/message]
                [transform_unit]
                    id=$second_unit.id
                    transform_to=Lich
                [/transform_unit]
                [heal_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                [/heal_unit]
                [modify_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    name=Mal-Nourished
                [/modify_unit]
                [message]
                    speaker=second_unit
                    message= _ "I am Mal-Nourished, the mightiest of liches!

I will destroy Wesnoth and bring the whole world into eternal darkness!"
                [/message]
                [message]
                    speaker=Jeremias
                    message= _ "<b>THERE CAN BE NO LICHES IN MY CAMPAIGN!</b>"
                [/message]
                [message]
                    speaker=Jeremias
                    message= _ "For real, I hate you guys. So boring."
                [/message]
                [modify_unit]
                    [filter]
                        id=Jeremias
                    [/filter]
                    [object]
                        id=temp_holy
                        [effect]
                            apply_to=new_attack
                            name="lightbeam"
                            description= _ ""
                            icon=attacks/lightbeam.png
                            type=arcane
                            range=ranged
                            [specials]
                                {WEAPON_SPECIAL_MAGICAL}
                            [/specials]
                            damage=0
                            number=1
                        [/effect]
                        [effect]
                            apply_to=new_animation
                            id=holy
                            [attack_anim]
                                [filter_attack]
                                    name=lightbeam
                                [/filter_attack]
                                {MISSILE_FRAME_LIGHT_BEAM}

                                start_time=-395
                                [frame]
                                    image="units/human-loyalists/master-at-arms.png:75"
                                [/frame]
                                [frame]
                                    image="units/human-loyalists/master-at-arms.png"
                                    halo=halo/holy/halo[6,1,3,5,6].png:[75*4,50]
                                [/frame]
                                {SOUND:HIT_AND_MISS {SOUND_LIST:HOLY} {SOUND_LIST:HOLY_MISS} -75}
                                [frame]
                                    image="units/human-loyalists/master-at-arms.png:50"
                                [/frame]
                            [/attack_anim]
                        [/effect]
                    [/object]
                [/modify_unit]
                [animate_unit]
                    flag=attack
                    hits=kill
                    [primary_attack]
                        name=lightbeam
                    [/primary_attack]
                    [facing]
                        x=$second_unit.x
                        y=$second_unit.y
                    [/facing]
                [/animate_unit]
                [harm_unit]
                    [filter]
                        id=$second_unit.id
                    [/filter]
                    animate=yes
                    damage_type=arcane
                    amount=999
                    fire_event=yes
                [/harm_unit]
                [remove_object]
                    object_id=temp_holy
                [/remove_object]
                [fire_event]
                    name=lich_achievement
                [/fire_event]
            [/case]
        [/switch]
        {CLEAR_VARIABLE random_stuff}
    [/event]

    [event]
        name=lich_achievement
        first_time_only=yes
        [set_achievement]
            content_for=RTL_SP
            id=RTL_lich
        [/set_achievement]
    [/event]

    [event]
        name=moveto
        [filter]
            side=1
            x,y=10,4
        [/filter]
        [set_variable]  
            name=random_stuff
            rand="Troll","Dwarvish Thunderguard","Shock Trooper","Javelineer","Swamp Lizard","Sky Drake","Goblin Knight","Saurian Ambusher"
        [/set_variable]
        [unit]
            type=$random_stuff
            id=convenient_ally
            side=1
            x,y=10,4
            placement=map
            passable=yes
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        {CLEAR_VARIABLE random_stuff}
        [message]
            speaker=convenient_ally
            message= _ "Hello! I am a creature that lives in this village for [SOME CONVOLUTED REASON]."
        [/message]
        [message]
            speaker=unit
            message= _ "Cool! Will you help us kill the vile ghoul Norcen?"
        [/message]
        [message]
            speaker=convenient_ally
            message= _ "Yes! The ghoul did [A BAD THING] to me."
        [/message]
    [/event]

    [event]
        name=why_is_the_potion_grey
        [message]
            side=1
            [not]
                id=Knyght
            [/not]
            message= _ "Why the hell is the healing potion grey?"
        [/message]
        [message]
            id=Knyght
            message= _ "And you know what a healing potion is supposed to look like? It's just a silly fantasy genre convention."
        [/message]
    [/event]

    [event]
        name=last breath
        [filter]
            id=Knyght
        [/filter]
        [message]
            id=Knyght
            message= _ "<i>*glorious Bengali insults*</i>"
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Hejnewar
        [/filter]
        [message]
            id=Hejnewar
            message= _ "You suck at Wesnoth. :sip:"
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Mechanical
        [/filter]
        [message]
            id=Mechanical
            message= _ "The Empire shall avenge me! Just wait for the steam fortresses!"
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Mirion
        [/filter]
        [message]
            id=Mirion
            message= _ "I won't be beaten so easily!

Behold, my secret weapon! The mushrooms that I snatched from the trolls."
        [/message]
        {VARIABLE unit.hitpoints 1}
        [unstore_unit]
            variable=unit
        [/unstore_unit]
        [heal_unit]
            id=Mirion
        [/heal_unit]
    [/event]
    [event]
        name=last breath
        [filter]
            id=GreenScarab
            type=Jinn
        [/filter]
        [message]
            id=GreenScarab
            message= _ "I should have kept more than one wish."
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=GreenScarab
            type=Horned Scarab
        [/filter]
        {VARIABLE unit.hitpoints 1}
        [unstore_unit]
            variable=unit
        [/unstore_unit]
        [message]
            id=GreenScarab
            message= _ "<i>*rubs the lamp*</i>"
        [/message]
        [remove_object]
            object_id=greenscarab_upgrade
        [/remove_object]
        [transform_unit]
            id=GreenScarab
            transform_to=Jinn
        [/transform_unit]
        [heal_unit]
            id=GreenScarab
        [/heal_unit]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Jeremias
        [/filter]
        [message]
            id=Jeremias
            message= _ "You're gonna let me die in my own campaign?"
        [/message]
        [message]
            id=Jeremias
            message= _ "Um, how about I end the scenario now with your defeat?"
        [/message]
        [message]
            id=Jeremias
            message= _ "Just trolling. Norcen, eat that player!"
        [/message]
        [modify_unit]
            [filter]
                id=Norcen
            [/filter]
            [object]
                [effect]
                    apply_to=hitpoints
                    increase_total=1000
                [/effect]
            [/object]
        [/modify_unit]
        [heal_unit]
            [filter]
                id=Norcen
            [/filter]
            amount=1000
        [/heal_unit]
        [message]
            id=Norcen
            message= _ "With pleasure."
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Durmoth
        [/filter]
        [message]
            id=Durmoth
            image=units/unknown-unit.png
            message= _ "<small>Optional AI-generated artwork 'durmoth-dying.webp' is <b>not installed</b>.</small>

Joke's on you, I've been dead before."
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=ForestDragon
        [/filter]
        [message]
            id=ForestDragon
            message= _ ":debug

<i>*proceeds to hack the scenario*</i>"
        [/message]
        [lua]
            code = << wesnoth.message("", "*debug* Debug mode activated!") >>
        [/lua]
        [message]
            id=ForestDragon
            message= _ "The code of this campaign is embarassingly simple lol."
        [/message]
        [message]
            id=Jeremias
            message= _ "-_-"
        [/message]
        [unit]
            id=Archmage
            type=Arch Mage
            name="Arch Mage"
            side=1
            x=$unit.x
            y=$unit.y
            moves=0
            placement=map
            passable=yes
            attacks_left=0
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [message]
            id=Archmage
            message= _ "Where am I? Where's my boss room?"
        [/message]
        [message]
            id=ForestDragon
            message= _ "Doesn't matter. Have fun."
        [/message]
        [kill]
            id=ForestDragon
            animate=no
        [/kill]
        [lua]
            code = << wesnoth.message("", "Forest Dragon has left the chat.") >>
        [/lua]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Dalas
        [/filter]
        [message]
            id=Dalas
            message= _ "Excuse me. I have to get back to work on Delfador's Memoirs."
        [/message]
    [/event]

[/scenario]
