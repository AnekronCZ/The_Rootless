#textdomain wesnoth-rtl

[scenario]
    id=05a_The_Fire
    name= _ "The Fire"
    map_data="{~add-ons/The_Rootless/maps/05a_The_Fire.map}"
    {TURNS 35 30 28}
    next_scenario=06_The_Rootless
    victory_when_enemies_defeated=no

    {SCENARIO_MUSIC northern_mountains.ogg}
    {EXTRA_SCENARIO_MUSIC the_city_falls.ogg}
    {EXTRA_SCENARIO_MUSIC battle-epic.ogg}

    {DEFAULT_SCHEDULE}
    {DEATHS_THE_FIRE}
    {FISH_DEATHS}
    {STAFF_OF_HAUNTING}
    {RECALL_DISCOUNT}
    {SHAMANS_ARE_COOL}
    {MAIN_CHARACTERS_EVENTS}

    {RTL_TRACK {JOURNEY_05_NEW}}

    [side]
        side=1
        controller=human
        {GOLD 340 300 300}
        {INCOME 3 2 1}
        team_name=Orcs
        user_team_name= _ "Orcs"
        {FLAG_VARIANT6 ragged}
        recruit="Orcish Archer,Goblin Spearman,Orcish Grunt,Orcish Assassin"
        type=Orcish Assassin
        id=Arshag
        shroud=no
        fog=no
        unrenamable=yes
        facing=nw
        name= _ "Arshag"
        profile=portraits/arshag.webp
        x,y=28,25
        [modifications]
            {TRAIT_INTELLIGENT}
        [/modifications]
        canrecruit=yes
    [/side]

    [side]
        side=2
        type=Drake Blademaster
        {GOLD 220 240 265}
        name="Godian Murr"
        id=Godian Murr
        color=gold
        controller=ai
        team_name=Drakes
        user_team_name= _ "Drakes"
        {FLAG_VARIANT long}
        x,y=14,1
    [/side]

    [side]
        side=3
        controller=ai
        hidden=yes
        team_name=Monsters
        user_team_name= _ "Monsters"
        color=green
        [ai]
            village_value=0
            aggression=0.8
        [/ai]
    [/side]

    {STARTING_VILLAGES_ALL 2}

    [event]
        name=prestart

        {ROOTLESS_HELP}
        {CLEAR_VARIABLE protector_awake}
        {CLEAR_VARIABLE morvin_dead} #won't be used in this branch

        [if]
            [variable]
                name=curse_lifted
                equals=yes
            [/variable]
            [then]
            [/then]
            [else]
                {VARIABLE undead_loading 4}
            [/else]
        [/if]

        [micro_ai] #todo: replace with [ai] inside [unit] for 1.17 port
            action=add
            side=2
            [filter]
                id=Guardian1
            [/filter]
            ai_type=return_guardian
            return_x,return_y=8,17
        [/micro_ai]
        [micro_ai]
            action=add
            side=2
            [filter]
                id=Guardian2
            [/filter]
            ai_type=return_guardian
            return_x,return_y=26,14
        [/micro_ai]
        [micro_ai] #Godian Murr doesn't leave his post
            side=2
            ai_type=zone_guardian
            action=add

            id=Godian Murr
            [filter_location]
                x,y=14,1
            [/filter_location]
        [/micro_ai]


        {PLACE_IMAGE (scenery/cave.png) 28 25}
        {PLACE_IMAGE (scenery/icepack-1.png) 15 12}
        {PLACE_IMAGE (scenery/rock4.png) 30 11}
        {PLACE_IMAGE (scenery/rock2.png) 4 19}
        {PLACE_IMAGE (scenery/castle-ruins.png) 18 5}
        {PLACE_IMAGE (scenery/castle-ruins2.png) 19 5}
        {PLACE_IMAGE (scenery/castle-ruins3.png) 19 6}

        [capture_village]
            x,y=22,24
        [/capture_village]

        [item]
            x,y=26,14
            halo=halo/fire-aura.png~SCALE(225,225) 
        [/item]
        [item]
            x,y=8,17
            halo=halo/fire-aura.png~SCALE(225,225) 
        [/item]
        [item]
            x,y=14,2
            halo=halo/fire-aura.png~SCALE(225,225) 
        [/item]

        {FIRE_LIGHT 26 14 right}
        {FIRE_LIGHT 8 17 left}
        {FIRE_LIGHT 14 2 top}

        [objectives]

            [objective]
                description= _ "Defeat Marshinar"
                condition=win
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=2
                    [/have_unit]
                [/show_if]
            [/objective]

            [objective] #alternative objective for when players just decides to kill everyone
                description= _ "Kill Godian Murr"
                condition=win
                [show_if]
                    [variable]
                        name=justfight
                        equals=yes
                    [/variable]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Take one of the drake outposts by killing its guardian"
                condition=win
                [show_if]
                    [have_unit]
                        id=Guardian1
                    [/have_unit]
                    [and]
                        [have_unit]
                            id=Guardian2
                        [/have_unit]
                    [/and]
                    [and]
                        [have_unit]
                            id=Marshinar
                            side=1
                        [/have_unit]
                    [/and]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Enter the drake fortress with Marshinar"
                condition=win
                [show_if]
                    [not]
                        [have_unit]
                            id=Guardian1
                        [/have_unit]
                    [/not]
                    [or]
                        [not]
                            [have_unit]
                                id=Guardian2
                            [/have_unit]
                        [/not]
                    [/or]
                    [and]
                        [have_unit]
                            id=Marshinar
                            side=1
                        [/have_unit]
                    [/and]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Any of your units who isn't Marshinar attacks Godian Murr"
                condition=lose
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=1
                    [/have_unit]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Death of Arshag"
                condition=lose
            [/objective]

            [objective]
                description= _ "Death of Stuurg"
                condition=lose
            [/objective]

            [objective]
                description= _ "Death of Toruk"
                condition=lose
            [/objective]


            [objective]
                description= _ "Death of Marshinar"
                condition=lose
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=1
                    [/have_unit]
                [/show_if]
            [/objective]

            {TURNS_RUN_OUT}

            [note]
                description="Marshinar takes only minimal damage until you slay his drakes."
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=2
                    [/have_unit]
                [/show_if]
            [/note]

            [note]
                description="Marshinar will not follow you in later scenarios."
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=1
                    [/have_unit]
                [/show_if]
            [/note]

            [note]
                description="He will be angry if forced to attack other drakes."
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=1
                    [/have_unit]
                    [and]
                        [not]
                            [have_unit]
                                id=Grokutin
                                side=1
                            [/have_unit]
                        [/not]
                    [/and]
                    [and]
                        [variable]
                            name=ally_angered
                            not_equals=yes
                        [/variable]
                    [/and]
                [/show_if]
            [/note]

            [note]
                description="Your drake allies will despise you if you force them to attack their kin."
                [show_if]
                    [have_unit]
                        id=Marshinar
                        side=1
                    [/have_unit]
                    [and]
                        [have_unit]
                            id=Grokutin
                            side=1
                        [/have_unit]
                    [/and]
                    [and]
                        [variable]
                            name=ally_angered
                            not_equals=yes
                        [/variable]
                    [/and]
                [/show_if]
            [/note]

            [note]
                description="Your drake allies are angry because you forced them to fight their kin."
                [show_if]
                    [variable]
                        name=ally_angered
                        equals=yes
                    [/variable]
                [/show_if]
            [/note]

            [gold_carryover]
                carryover_percentage=0
                bonus=no
            [/gold_carryover]

        [/objectives]

    [/event]

    [event]
        name=start

        [unit]
#ifdef HARD
            type=Drake Flameheart
#else
            type=Drake Flare
#endif
            x,y=20,12
            facing=se
            side=2
            id=Marshinar
            name="Marshinar"
            unrenamable=yes
            [modifications]
                {TRAIT_LOYAL_HERO}
                [object]
                    id=wing_leader_object
                    [effect]
                        apply_to=overlay
                        add="misc/gift-icon.png"
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            blade=30
                            pierce=30
                            fire=30
                            impact=30
                            arcane=30
                            cold=30
                        [/resistance]
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_WING_LEADER}
                        [/abilities]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        [unit]
#ifdef EASY
            type=Drake Burner
#else
            type=Fire Drake
#endif
            x,y=19,12
            facing=se
            side=2
            role=FirstWave
        [/unit]

        [unit]
#ifdef EASY
            type=Drake Fighter
#else
            type=Drake Warrior
#endif
            x,y=21,12
            facing=se
            side=2
            role=FirstWave
        [/unit]

        [unit]
            type=Sky Drake
            x,y=18,11
            facing=se
            side=2
            role=FirstWave
        [/unit]

        [unit]
            type=RTL Albino Drake
            name=Grokutin
            id=Grokutin
            unrenamable=yes
            x,y=22,11
            facing=se
            side=2
            role=FirstWave
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]

        [unit]
#ifdef EASY
            type=Drake Arbiter
#else
            type=Drake Warden
#endif
            x,y=26,14
            facing=se
            side=2
            id=Guardian2
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

        [unit]
#ifdef EASY
            type=Drake Thrasher
#else
            type=Drake Enforcer
#endif
            x,y=8,17
            facing=se
            side=2
            id=Guardian1
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]


        [message]
            speaker=Arshag
            message= _ "Finally, we're out of the caves!

Let's build a camp."
        [/message]

        {MOVE_UNIT id=Arshag 25 22}

        {MODIFY_TERRAIN Ket 25 22}
        [delay]
            time=100
        [/delay]
        [redraw][/redraw]
        {MODIFY_TERRAIN Ce 25 23}
        [delay]
            time=100
        [/delay]
        [redraw][/redraw]
        {MODIFY_TERRAIN Ce 24 22}
        [delay]
            time=100
        [/delay]
        [redraw][/redraw]
        {MODIFY_TERRAIN Ce 25 24}
        [delay]
            time=100
        [/delay]
        [redraw][/redraw]
        {MODIFY_TERRAIN Ce 24 23}
        [delay]
            time=100
        [/delay]
        [redraw][/redraw]
        {MODIFY_TERRAIN Ce 26 23}
        [redraw][/redraw]

        [recall]
            id=Toruk
        [/recall]

        [recall]
            id=Stuurg
        [/recall]

        {COND_SAY curse_lifted Toruk "We didn't meet any undead along the way. It seems the ritual was a success." "We should watch the entrance to the caves. There are still undead swarming inside."}

        {IF_WOLF_SAY "<i>Arshag's wolf sniffs and picks up an unfamiliar scent. Suddenly, he gets nervous and his fur stands up.</i>"}

        [message]
            speaker=Marshinar
            message= _ "Scarcely could I believe my own eyes were they not as sharp as they are.
This prey I have not seen since we arrived to this Greatland."
        [/message]

        [message]
            speaker=Godian Murr
            message= _ "I also remember these creatures.
They are an infestation that depletes the land of our other game.
They may have been introduced here by the Caster who was spying on us recently.

Marshinar, you and your wing will harvest them."
        [/message]

        [message]
            speaker=Marshinar
            message= _ "Aspirant Godian, my wing is brave yet the creatures are numerous.
It might be advisable to bring all of our strength."
        [/message]

        [message]
            speaker=Godian Murr
            message= _ "I need not be advised.
Your conceit knows no bounds.
It is shameful that you fear such frail creatures."
        [/message]

        {HINT_ITEM}

    [/event]

    [event] #ogre easter egg
        name=moveto
        [filter]
            side=1
            x,y=4,19
        [/filter]
        [unit]
            type=Ogre
            name=Burp
            id=Burp
            x,y=3,19
            facing=se
            side=3
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

        [message]
            speaker=Burp
            message= _ "Burp!"
        [/message]

        {VARIANT_SAY "Mouth smells! Kill it!" "A monssster! Kill it!" "A monster! Kill it!" "A monster! Kill it!"}

        [if]
            [have_unit]
                id=$unit.id
                type_adv_tree=Ghost
            [/have_unit]
            [then]
                [message]
                    speaker=Burp
                    message= _ "Burp not monster. You see-through thing look more monster than Burp."
                [/message]
            [/then]
        [/if]

        [message]
            speaker=Arshag
            message= _ "Wait, maybe it's friendly."
        [/message]

        [message]
            speaker=Burp
            message= _ "Give Burp food!"
        [/message]

        [message]
            speaker=Arshag
            message= _ ""
            [option]
                label= _ "Here, have some of our supplies! (costs 15 gold)"
                [command]
                    [store_gold]
                        side=1
                        variable=supplies
                    [/store_gold]
                    [if]
                        [variable]
                            name=supplies
                            greater_than=14
                        [/variable]
                        [then]  
                            [gold]
                                amount=-15
                                side=1
                            [/gold]
                            [sound]
                                name=gold.ogg
                            [/sound]
                            [message]
                                speaker=Burp
                                message= _ "Burp like food. Burp help fight drakes.
                                
Then Burp eat them too."
                            [/message]
                            [modify_unit]
                                [filter]
                                    id=Burp
                                [/filter]
                                side=1
                            [/modify_unit]
                        [/then]
                        [else]
                            [message]
                                speaker=Toruk
                                message= _ "Arshag, are you blind? We don't have enough supplies for that thing."
                            [/message]
                        [/else]
                    [/if]
                    {CLEAR_VARIABLE supplies}
                [/command]
            [/option]
            [option]
                label= _ "If you help us, you can eat all the drakes we kill."
                [command]
                    [set_variable]  
                        name=ogre 
                        rand=1..6
                    [/set_variable]
                    [if]  
                        [variable]  
                            name=ogre  
                            equals=1
                        [/variable]  
                        [then]  
                            [message]
                                speaker=Burp
                                message= _ "Burp hate drakes, drakes hunt Burp food. Burp want kill drake."
                            [/message]
                            [modify_unit]
                                [filter]
                                    id=Burp
                                [/filter]
                                side=1
                            [/modify_unit]
                            [set_achievement]
                                content_for=RTL_SP
                                id=RTL_wololo
                            [/set_achievement]
                        [/then] 
                        [else]
                            [message]
                                speaker=Burp
                                message= _ "Burp not likes eat drakes. Scales stick in Burp teeth.
                                
Burp eat you."
                            [/message] 
                        [/else] 
                    [/if]
                [/command]
            [/option]
            [option]
                label= _ "We'll give you nothing."
                [command]
                [/command]
            [/option]
        [/message]

    [/event]

    [event]
        name=last breath
        first_time_only=no
        [filter]
            role=FirstWave
        [/filter]
        [if]  
            [not]
                [have_unit]
                    role=FirstWave
                [/have_unit]
            [/not]  

            [then]  
                [remove_object]
                    object_id=wing_leader_object
                [/remove_object]

                [message]
                    speaker=Marshinar
                    side=2
                    message= _ "My wing is defeated.
I shall fight until the reinforcements arrive."
                [/message]
            [/then]

        [/if]
    [/event]

    [event]
        name=last breath
        [filter]
            id=Marshinar
            side=2
        [/filter]
        [filter_condition]
            [variable]
                name=justfight
                not_equals=yes
            [/variable]
        [/filter_condition]
         
        {VARIABLE unit.hitpoints 1}

        [unstore_unit]
            variable=unit
        [/unstore_unit]

        [sound]
            name=drake-die.ogg
        [/sound]

        [message]
            speaker=Marshinar
            message= _ "Aaargh!"
        [/message]

        [if]
            [variable]
                name=turn_number
                less_than_equal_to=5
            [/variable]
            [then]
                [set_achievement]
                    content_for=RTL_SP
                    id=RTL_marshinar
                [/set_achievement]
            [/then]
        [/if]

        {MOVE_UNIT id=Grokutin $unit.x $unit.y}

        [message]
            speaker=Grokutin
            message= _ "Father!"
        [/message]

        [message]
            speaker=Stuurg
            message= _ "I think the drake had enough."
        [/message]

        [if]
            [have_unit]
                id=Grokutin
                role=FirstWave
            [/have_unit]
            [then]
                {MOVE_UNIT id=Grokutin 13 2}

                [modify_unit]
                    [filter]
                        id=Grokutin
                    [/filter]
                    role=""
                [/modify_unit]

                [message]
                    speaker=Grokutin
                    message= _ "Aspirant Godian!
The prey prevails over our wing.
Marshinar needs help."
                [/message]

                [message]
                        speaker=Godian Murr
                        message= _ "Then his weakness is even more worthy of contempt then I judged.

I shall send no help to the one that brings shame to us all."
                [/message]

                [message]
                    speaker=Grokutin
                    message= _ "You would allow my father to be slaughtered by mere prey.
<i>That</i> is truly dishonorable."
                [/message]
                
                {MOVE_UNIT id=Grokutin $unit.x $unit.y}
            [/then]
        [/if]

        [message]
            speaker=Marshinar
            message= _ "Aspirant Godian... betrayed me..."
        [/message]

        [if]
            [variable]
                name=arshag_angry
#ifdef HARD
                less_than=6
#else
                less_than=8
#endif
            [/variable]

            [then]
                [message]
                    speaker=Arshag
                    message= _ "That he clearly did.

We intend to settle somewhere in these lands and we cannot trust a neighbour like that."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "Alas, Dominant Gorlack is right.
The orcs have honor; they are no prey.
The Great Contention is upon us."
                [/message]

                [message]
                    speaker=Toruk
                    message= _ "What do you mean?"
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I mean that I was mistaken.
I shall ally myself with you; so will my son.
Godian Murr is a foolish leader, a rogue Aspirant."
                [/message]

                [message]
                    speaker=Toruk
                    message= _ "How can we trust you? A few moments ago you were trying to kill us."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I give you my word.
We shall fight by your side."
                [/message]

                [message]
                    speaker=Grokutin
                    message= _ "Do not make us attack our kin, if it can be helped.
We shall defend ourselves, yet will not kill our own in cold blood.
Only Godian Murr is our enemy."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "I'll trust your words then."
                [/message]

                [fire_event]
                    id=outpost_phase
                [/fire_event]

                [modify_unit]
                    [filter]
                        id=Marshinar,Grokutin
                    [/filter]
                    side=1
                [/modify_unit]

                [allow_recruit]
                    side=2
                    type=Drake Burner,Drake Fighter,Drake Glider,Drake Clasher
                [/allow_recruit]

                {GENERIC_UNIT 2 (Fire Drake) recall recall}
                {GENERIC_UNIT 2 (Drake Warrior) recall recall}
                {GENERIC_UNIT 2 (Sky Drake) recall recall}
                {GENERIC_UNIT 2 (Drake Arbiter) recall recall}
#ifdef EASY
#else
                {GENERIC_UNIT 2 (Drake Warrior) recall recall}
                {GENERIC_UNIT 2 (Drake Thrasher) recall recall}
                {GENERIC_UNIT 2 (Drake Flare) recall recall}
#endif
#ifdef HARD
                {GENERIC_UNIT 2 (Sky Drake) recall recall}
                {GENERIC_UNIT 2 (Fire Drake) recall recall}
                {GENERIC_UNIT 2 (Fire Drake) recall recall}
#endif
            [/then]
            [else]

                [message]
                    speaker=Arshag
                    message= _ "Well, you will have an opportunity to get revenge."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "Seize his son."
                [/message]

                [modify_unit]
                    [filter]
                        id=Grokutin
                    [/filter]
                    side=1
                [/modify_unit]

                [store_unit]
                    [filter]
                        id=Grokutin
                    [/filter]
                    variable=grokutin_store
                [/store_unit]

                {VARIABLE grokutin_caged yes}

                [kill]
                    id=Grokutin
                    animate=no
                [/kill]

                {PLACE_IMAGE "units/drakes/albino.png~RC(magenta>red)" 26 22}
                {PLACE_IMAGE items/cage.png 26 22}
                [redraw][/redraw]

                [sound]
                    name=drake-die.ogg
                [/sound]

                [message]
                    speaker=Marshinar
                    message= _ "You have no honor!"
                [/message]

                [message]
                    speaker=Toruk
                    message= _ "Arshag, is this really a good idea?"
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "I won't stand a talk of honor. They attacked us unprovoked!

Drake, you will help us slay your leader. You will swear to never again fight orcs and then you'll lead your drake-horde away."
                [/message]

                [delay]
                    time=500
                [/delay]

                [message]
                    speaker=Marshinar
                    message= _ "I shall do as you bid, yet only because you hold my son.

Do not make me attack my own kin.
The only enemy is Godian the traitor."
                [/message]

                [fire_event]
                    id=outpost_phase
                [/fire_event]

                [modify_unit]
                    [filter]
                        id=Marshinar
                    [/filter]
                    side=1
                [/modify_unit]

                [allow_recruit]
                    side=2
                    type=Drake Burner,Drake Fighter,Drake Glider,Drake Clasher
                [/allow_recruit]

                {GENERIC_UNIT 2 (Fire Drake) recall recall}
                {GENERIC_UNIT 2 (Drake Warrior) recall recall}
                {GENERIC_UNIT 2 (Sky Drake) recall recall}
                {GENERIC_UNIT 2 (Drake Arbiter) recall recall}
#ifdef EASY
#else
                {GENERIC_UNIT 2 (Drake Warrior) recall recall}
                {GENERIC_UNIT 2 (Drake Thrasher) recall recall}
                {GENERIC_UNIT 2 (Drake Flare) recall recall}
#endif
#ifdef HARD
                {GENERIC_UNIT 2 (Sky Drake) recall recall}
                {GENERIC_UNIT 2 (Fire Drake) recall recall}
                {GENERIC_UNIT 2 (Fire Drake) recall recall}
#endif
            [/else]
        [/if]

        [if] #move allied drakes from harm's way if first wave's enemies are still around
            [have_unit]
                role=FirstWave
            [/have_unit]
            [then]
                [remove_object]
                    object_id=wing_leader_object
                [/remove_object]
                {MOVE_UNIT id=Marshinar 25 25}
                [if]
                    [have_unit]
                        id=Grokutin
                        side=1
                    [/have_unit]
                    [then]
                        {MOVE_UNIT id=Grokutin 26 25}
                    [/then]
                [/if]
            [/then] 
        [/if]
        [show_objectives]
        [/show_objectives]
    [/event]

    [event]
        name=attack

        [filter]
            id=Marshinar,Grokutin
        [/filter]
        [filter_second]
            side=2
        [/filter_second]
        [message]
            side=2
            type=Drake Arbiter,Drake Clasher,Drake Thrasher,Drake Enforcer,Drake Warden
            message= _ "Betrayer!
By the Ways of Morogor, you will be executed."
        [/message]
        [message]
            speaker=unit
            message= _ "This is not what we agreed on.
My kin will despise me now."
        [/message]

        {VARIABLE ally_angered yes}
    [/event]

    [event]
        name=turn $undead_loading
        first_time_only=no
        [if]
            [have_unit]
                id=Marshinar
                side=1
            [/have_unit]
            [then]
                {CLEAR_VARIABLE undead_loading}
                [fire_event]
                    name=undead_revenge
                [/fire_event]
            [/then]
            [else]
                {VARIABLE_OP undead_loading add 6}
            [/else]
        [/if]
    [/event]

    [event]
        name=undead_revenge

        {GENERIC_UNIT 3 (Deathblade) 28 25}
#ifdef EASY
        {GENERIC_UNIT 3 (Ghost) 29 25}
#else
        {GENERIC_UNIT 3 (Shadow) 29 25}
#endif
#ifdef HARD
        {GENERIC_UNIT 3 (Necrophage) 28 24}
#else
        {GENERIC_UNIT 3 (Ghoul) 28 24}
#endif

        [message]
            speaker=Toruk
            message= _ "Arshag, some undead are coming out of the cave!"
        [/message]
    [/event]

    [event] #drake confrontation
        name=moveto
        [filter]
            id=Marshinar
            x="12,13,14,15"
            y="3,2-4,1-2,2"
        [/filter]
        [filter_condition]
            [not]
                [have_unit]
                    id=Guardian1
                [/have_unit]
            [/not]
            [or]
                [not]
                    [have_unit]
                        id=Guardian2
                    [/have_unit]
                [/not]
            [/or]
        [/filter_condition]

        [modify_unit]
            [filter]
                id=Godian Murr
            [/filter]
                [object]
                    [effect]
                        apply_to=new_animation
                        [death]
                            start_time=0
                            [frame]
                                duration=60
                                image="units/drakes/godian-death-1.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-2.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-3.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-4.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-5.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-6.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-7.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-8.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-9.png"
                            [/frame]
                            [frame]
                                duration=50
                                image="units/drakes/godian-death-10.png"
                            [/frame]
                        [/death]
                    [/effect]
                [/object]
        [/modify_unit]

        [message]
            speaker=Marshinar
            message= _ "Godian Murr, the betrayer!
You have tried to have me killed yet I breathe still.
By the Ways of Morogor I challenge you to a duel."
        [/message]
        [message]
            speaker=Godian Murr
            message= _ "You speak of traitors yet you help prey against your kin.
You deserve not the honor of death in combat.
Alas, too much blood was spilled today.

I accept the challenge."
        [/message]

        [if]
            [not]
                [have_unit]
                    type=Drake Glider,Sky Drake,Hurricane Drake,RTL Albino Drake
                [/have_unit]
            [/not]
            [then]
                {GENERIC_UNIT 2 (Drake Glider) 15 1}
            [/then]
        [/if]

        [message]
            type=Drake Glider,Sky Drake,Hurricane Drake,RTL Albino Drake
            message= _ "Behold the duel!
I shall commit the result to the Spoken Memories."
        [/message]

        #todo: clear units that could be around the volcano

        {MOVE_UNIT id=Marshinar 9 5}

        {MOVE_UNIT id="Godian Murr" 10 4}

        [move_unit]
            id=Marshinar
            to_x=7,7,11
            to_y=5,3,4
        [/move_unit]

        [animate_unit]
            flag=attack
            [filter]
                x,y=11,4
            [/filter]
            [facing]
                x,y=10,4
            [/facing]
            [primary_attack]
                range=ranged
            [/primary_attack]
            hits=yes
            [animate]
                flag=defend
                [filter]
                    x,y=10,4
                [/filter]
                hits=yes
            [/animate]
        [/animate_unit]

        [move_unit]
            id=Godian Murr
            to_x=7,10,11
            to_y=6,7,5
        [/move_unit]

        [animate_unit]
            flag=attack
            [filter]
                x,y=11,5
            [/filter]
            [facing]
                x,y=11,4
            [/facing]
            [primary_attack]
                range=melee
            [/primary_attack]
            hits=yes
            [animate]
                flag=defend
                [filter]
                    x,y=11,4
                [/filter]
                hits=yes
            [/animate]
        [/animate_unit]

        {MOVE_UNIT id=Marshinar 8 5}

        [message]
            speaker=Grokutin
            message= _ "Father is bleeding."
        [/message]

        {MOVE_UNIT id="Godian Murr" 9 5}

        [animate_unit]
            flag=attack
            [filter]
                x,y=9,5
            [/filter]
            [facing]
                x,y=8,5
            [/facing]
            [primary_attack]
                range=melee
            [/primary_attack]
            hits=no
            [animate]
                flag=defend
                [filter]
                    x,y=8,5
                [/filter]
                hits=miss
            [/animate]
        [/animate_unit]

        [message]
            speaker=Marshinar
            message= _ "You have missed.
Feel the Winds of Fate.
They are turning against you."
        [/message]

        [store_unit]
            [filter]
                id=Marshinar
            [/filter]
            variable=marshinar_store
        [/store_unit]

        [kill]
            id=Marshinar
            animate=no
        [/kill]

        [move_unit_fake]
            type=$marshinar_store.type
            side=1
            x=8,6,9,9
            y=5,6,9,5
        [/move_unit_fake]

        [kill]
            id=Godian Murr
            animate=yes
        [/kill]

        [delay]
            time=2000
        [/delay]

        [message]
            speaker=Arshag
            message= _ "Are they dead?"
        [/message]

        [message]
            speaker=Grokutin
            message= _ "I do not believe so.
This was surely my father's plan."
        [/message]

        [unstore_unit]
            variable=marshinar_store
            x,y=9,5
        [/unstore_unit]

        [message]
            speaker=Marshinar
            message= _ "The heat of a volcano is deadly for the Fighter caste.
Yet my inner flame burns much brighter.
Beat witness to my triumph!"
        [/message]

        {THE_FIRE_ENDING}

        [switch]
            variable=the_fire_ending

            [case]
                value=1
                [message]
                    speaker=Arshag
                    message= _ "What now?"
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "Release my son."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "Of course."
                [/message]

                [unstore_unit]
                    variable=grokutin_store
                    x,y=26,22
                [/unstore_unit]

                [remove_item]
                    x,y=26,22
                [/remove_item]

                {MOVE_UNIT id=Grokutin 9 5}

                [modify_unit]
                    [filter]
                        id=Marshinar,Grokutin
                    [/filter]
                    side=2
                [/modify_unit]

                [message]
                    speaker=Marshinar
                    message= _ "I did not trust you at first, orc, yet you have kept your word.
I shall fly to Dominant Gorlack to discuss the recent events with him.

Your arrival has convinced me that creatures that speak are not prey.
I thank you, for you got us rid of the rogue Aspirant Godian."
                [/message]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "He was defeated in an honorable duel.
The flame of Marshinar is pure and true."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ "One more thing, Marshinar.

You should leave this mountain with all the other drakes. This place will soon be eaten by fire and molten stone."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "You will have to explain to me how you can be so sure of that."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "Trust us on this.

It will happen before the moon fades and shines again for the sixth time from today."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I shall consider your advice.
Let us part now in peace."
                [/message]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                {MOVE_UNIT id=Grokutin 1 1}

                [kill]
                    id=Grokutin
                    animate=no
                [/kill]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]

            [case]
                value=2
                [message]
                    speaker=Arshag
                    message= _ "What now?"
                [/message]
                [message]
                    speaker=Marshinar
                    message= _ "Release my son."
                [/message]

                [unstore_unit]
                    variable=grokutin_store
                    x,y=26,22
                [/unstore_unit]

                [remove_item]
                    x,y=26,22
                [/remove_item]

                {MOVE_UNIT id=Grokutin 9 5}

                [modify_unit]
                    [filter]
                        id=Marshinar,Grokutin
                    [/filter]
                    side=2
                [/modify_unit]

                [message]
                    speaker=Grokutin
                    message= _ "Our dealings are over.
I am filled with anger that you made my father fight our own kin."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "My fight was not with my wing.
My fight was only with Godian himself.
Yet because of you I have the blood of my kin on my claws.

Let us part ways now.
If we meet again, we shall not meet as friends."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ {WHISPER _"They will have other problems. The mountain will soon flood this place with fire and molten stone."}
                [/message]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                {MOVE_UNIT id=Grokutin 1 1}

                [kill]
                    id=Grokutin
                    animate=no
                [/kill]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "We are now without a leader.
We shall fly to Dominant Gorlack.
He will learn about Marshinar's shame and your dishonor."
                [/message]

                [kill]
                    side=2
                    animate=no
                [/kill]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]

            [case]
                value=3
                [message]
                    speaker=Arshag
                    message= _ "You are powerful and brave. I will be glad to have you as neighbour, once we settle somewhere in the vicinity."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I shall fly to Dominant Gorlack to discuss the recent events with him.
It pains me to admit that I have doubted his views in the past.

Your arrival has convinced me that creatures that speak are not prey.
Your help got us rid of the rogue Aspirant Godian."
                [/message]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "He was defeated in an honorable duel.
The flame of Marshinar is pure and true."
                [/message]

                [message]
                    speaker=Grokutin
                    message= _ "I feel a debt to the orcs.
Let me follow them for a time and assist them on their arduous journey."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "My son was born different to the other drakes.
The sun hurts his eyes; his skin hurts after a bright day.
He prefers the night, much like you.

Hereby I give him a blessing to join your cause."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ "One more thing, Marshinar.

Take off from this place with all the other drakes on this mountain. At least for a while.

It will not be long before this place is eaten by fire and molten stone."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "You will have to explain to me how you can be so sure of that."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "Trust us on this.

It will happen before the moon fades and shines again for the sixth time from today."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I shall consider your advice.
Let us part now in peace."
                [/message]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                [set_achievement]
                    content_for=RTL_SP
                    id=RTL_bff
                [/set_achievement]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]

            [case]
                value=4

                [modify_unit]
                    [filter]
                        id=Marshinar,Grokutin
                    [/filter]
                    side=2
                [/modify_unit]

                [message]
                    speaker=Grokutin
                    message= _ "Our dealings are over.
I am filled with anger that you made us fight our own kin."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "My fight was not with my wing.
My fight was only with Godian himself.
Yet because of you I have the blood of my kin on my claws.

Let us part ways now.
If we meet again, we shall not meet as friends."
                [/message]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                {MOVE_UNIT id=Grokutin 1 1}

                [kill]
                    id=Grokutin
                    animate=no
                [/kill]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "We are now without a leader.
We shall fly to Dominant Gorlack.
He will learn about Marshinar's shame and your dishonor."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ {WHISPER _"They will have other things to worry about. It won't be long before the mountain drowns this place in fire and molten stone."}
                [/message]

                [kill]
                    side=2
                    animate=no
                [/kill]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]

            [case]
                value=5
                [message]
                    speaker=Arshag
                    message= _ "What now?"
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "My fight was not with my wing.
My fight was only with Godian himself.
Yet because of you I have the blood of my kin on my claws."
                [/message]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "We are now without a leader.
We shall fly to Dominant Gorlack.
He will learn about Marshinar's shame and your dishonor."
                [/message]

                [kill]
                    side=2
                    animate=no
                [/kill]

                [message]
                    speaker=Marshinar
                    message= _ "You also let my son die needlessly when I put my trust in your leadership.
I proclaim that you are worse than a rogue; you are a treacherous worm and a spineless coward.

I shall hunt you until my last breath."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ {WHISPER _"I hope he will have other things to worry about. It won't be long before the mountain drowns this place in fire and molten stone."}
                [/message]

                [store_unit]
                    [filter]
                        id=Marshinar
                    [/filter]
                    variable=marshinar_revenge
                [/store_unit]

                [modify_unit]
                    [filter]
                        id=Marshinar
                    [/filter]
                    side=2
                [/modify_unit]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]

            [case]
                value=6
                [message]
                    speaker=Arshag
                    message= _ "So it's over.

I'm very sorry for the loss of your son."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "It grieves me that Grokutin did not see this triumph over the false aspirant Godian."
                [/message]

                [message]
                    side=2
                    [not]
                        id=Marshinar,Grokutin
                    [/not]
                    message= _ "He was defeated in an honorable duel.
The flame of Marshinar is pure and true."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I shall fly to Dominant Gorlack to discuss the recent events with him.

Your arrival has convinced me that creatures that speak are not prey.
Let us part now in peace."
                [/message]

                [message]
                    speaker=Stuurg
                    message= _ "One more thing, Marshinar.
                    
You should take all the other drakes with you. This place will soon be eaten by fire and molten stone."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "You will have to explain to me how you can be so sure of that."
                [/message]

                [message]
                    speaker=Arshag
                    message= _ "Trust us on this.

It will happen before the moon fades and shines again for the sixth time from today."
                [/message]

                [message]
                    speaker=Marshinar
                    message= _ "I shall consider your advice.
Let us part now in peace."
                [/message]

                {MOVE_UNIT id=Marshinar 1 1}

                [kill]
                    id=Marshinar
                    animate=no
                [/kill]

                [fire_event]
                    name=victory
                [/fire_event]
            [/case]
        [/switch]
    [/event]

    [event] #unit spots a fish with arms
        name=moveto
        [filter]
            x,y=17,17
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=fish_spotted
                not_equals=yes
            [/variable]
        [/filter_condition]
        {VARIABLE fish_spotted yes}
        [move_unit_fake]
            type=Hunter Caribe
            side=3
            x=16,18
            y=14,12
        [/move_unit_fake]
        [if]
            [have_unit]
                id=Gaethyn
                x,y=17,17
            [/have_unit]
            [and]
                [variable]
                    name=gaethyn_discovered
                    equals=yes
                [/variable]
            [/and]
            [then]
                {VARIABLE gaethyn_discovered lake}
                [fire_event]
                    name=fish_lake
                [/fire_event]
            [/then]
            [else]
                [if]
                    [have_unit]
                        id=Gaethyn
                        search_recall_list=yes
                    [/have_unit]
                    [then]
                        [if]
                            [have_unit]
                                race=drake
                                x,y=17,17
                            [/have_unit]
                            [then]
                                [message] #drakes don't really know Gaethyn yet
                                    speaker=unit
                                    message= _ "The prey that lives in these waters is very peculiar.
It reminds of a fish, yet has arms."
                                [/message]
                            [/then]
                            [else]
                                {VARIANT_SAY "Huh, fishes with arms? Dat will make da dead guy happy." "I sssee sssomething like a fisssh with armsss. Isss it the creature that Gaethyn keepsss talking about?" "That fish had arms! Get the dead fisher!" "I swear that fish had arms! Call the undead fisherman!"}
                            [/else]
                        [/if]
                        [recall]
                            id=Gaethyn
                            x,y=25,22
                        [/recall]
                        [message]
                            speaker=Gaethyn
                            message= _ "My fish? Where?!"
                        [/message]
                    [/then]
                    [else]
                        [if]
                            [have_unit]
                                race=drake
                                x,y=17,17
                            [/have_unit]
                            [then]
                                [message]
                                    speaker=unit
                                    message= _ "The prey that lives in these waters is very peculiar.
It reminds of a fish, yet has arms."
                                [/message]
                            [/then]
                            [else]
                                {VARIANT_SAY "Huh, fishes with arms?" "The water here isss cold and dark. I sssee sssome weird creaturesss near the bottom. They look like a fisssh, but have armsss!" "That fish had arms! Get the dead fisher!" "There are some strange fish in this lake. I swear I saw one that has hands!"}
                            [/else]
                        [/if]
                    [/else]
                [/if]
            [/else]
        [/if]
    [/event]

    [event] #in case Gaethyn comes only after he's called
        name=moveto
        [filter]
            x,y=17,17
            id=Gaethyn
        [/filter]
        {VARIABLE gaethyn_discovered lake}
        {VARIABLE fish_spotted yes}
        [fire_event]
            name=fish_lake
        [/fire_event]
    [/event]

    [event]
        name=fish_lake
        [message]
            speaker=Gaethyn
            message= _ "Oh, there it is!
The fish with arms!
The one that I've been so long searching for!"
        [/message]

#ifdef EASY
        {GENERIC_UNIT 3 (Nibbler) 16 16}
        {GENERIC_UNIT 3 (Nibbler) 15 17}
#endif
#ifdef NORMAL
        {GENERIC_UNIT 3 (Nibbler) 16 16}
        {GENERIC_UNIT 3 (Caribe) 15 17}
#endif
#ifdef HARD
        {GENERIC_UNIT 3 (Caribe) 16 16}
        {GENERIC_UNIT 3 (Caribe) 15 17}
#endif
        [unit]
            side=3
            id=The Fish
            type=Hunter Caribe
            x,y=16,17
            facing=ne
            [modifications]
                {TRAIT_LOYAL_HERO}
            [/modifications]
        [/unit]

        [message]
            speaker=Gaethyn
            message= _ "Everyone, stay back!

I'm going to be really angry if someone else catches that fish first."
        [/message]
    [/event]

    [event]
        name=attack
        [filter]
            side=1
            [not]
                id=Marshinar
            [/not]
        [/filter]
        [filter_second]
            id=Godian Murr
        [/filter_second]
        [filter_condition]
            [have_unit]
                id=Marshinar
                side=1
            [/have_unit]
        [/filter_condition]
        [message]
            speaker=Godian Murr
            message= _ "Foolish prey!

I shall return with the full might of our flight!"
        [/message]
        {MOVE_UNIT id="Godian Murr" 1 1}
        [kill]
            id=Godian Murr
            animate=no
        [/kill]
        [message]
            side=2
            message= _ "What boundless cowardice!
Gorlack will surely mete out punishment upon him, yet it will avail you naught.

Flight will become aware of your presence.
It will embark on a hunt."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
        name=attack
        [filter]
            [not]
                side=1
            [/not]
        [/filter]
        [filter_second]
            id=Godian Murr
        [/filter_second]
        [message]
            speaker=Godian Murr
            message= _ "I shall destroy you!"
        [/message]
        [gold]
            side=2
            amount=80
        [/gold]
    [/event]

    [event]
        name=victory
        {CLEAR_VARIABLE marshinar_store}
        [message]
            id=Toruk
            message= _ "What now?"
        [/message]
        [message]
            id=Arshag
            message= _ "Winter's almost here.

We will descend to the lowlands and camp there until spring."
        [/message]
        [message]
            id=Stuurg
            message= _ "Orcs beat the mighty fire-breathing lizards.

We picked good allies."
        [/message]
        [endlevel]
            result=victory
            bonus=no
            {NEW_GOLD_CARRYOVER 0}
        [/endlevel]
    [/event]

    [event]
        name=die
        [filter]
            id=Guardian1,Guardian2
        [/filter]
        [remove_object]
            object_id=drake_mark
        [/remove_object]
        [message]
            id=Godian Murr
            message= _ "This prey is indeed more dangerous than I expected."
        [/message]
    [/event]

    [event]
        name=time over
        [message]
            race=orc
            message= _ "Look north! More drakes are coming!"
        [/message]
        [message]
            id=Godian Murr
            message= _ "Now this prey will finally be harvested."
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            side=1
            x="0,1,1,2,2,3,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,23,24,24,25,25,26,27,28,29,30,31,32"
            y="0-13,0-14,26,0-13,25-26,0-14,26,0-13,0-14,0-13,0-12,0-11,0-11,0-11,0-11,0-11,0-11,0-10,0-11,0-10,0-9,0-8,0-9,0-7,0-7,0-6,0-6,9-10,0-6,8-10,0-6,8-11,0-10,0-9,0-9,0-9,0-9,0-9,0-9"
        [/filter]
        [filter_condition]
            [have_unit]
                id=Marshinar
                side=2
            [/have_unit]
        [/filter_condition]
        
        [allow_recruit]
            side=2
            type=Drake Burner,Drake Fighter,Drake Glider,Drake Clasher
        [/allow_recruit]

        {GENERIC_UNIT 2 (Fire Drake) recall recall}
        {GENERIC_UNIT 2 (Drake Warrior) recall recall}
        {GENERIC_UNIT 2 (Sky Drake) recall recall}
        {GENERIC_UNIT 2 (Drake Arbiter) recall recall}
#ifdef EASY
#else
        {GENERIC_UNIT 2 (Drake Warrior) recall recall}
        {GENERIC_UNIT 2 (Drake Thrasher) recall recall}
        {GENERIC_UNIT 2 (Drake Flare) recall recall}
#endif
#ifdef HARD
        {GENERIC_UNIT 2 (Sky Drake) recall recall}
        {GENERIC_UNIT 2 (Fire Drake) recall recall}
        {GENERIC_UNIT 2 (Fire Drake) recall recall}
#endif

        [message]
            id=Godian Murr
            message= _ "The prey is advancing on my fortress.
You are a bad hunter, Marshinar.
I shall harvest this vermin myself."
        [/message]

        [message]
            speaker=Marshinar
            message= _ "I am dishonored.
I shall fight until my last breath to clear my name."
        [/message]

        [show_objectives]
        [/show_objectives]

        {VARIABLE justfight yes}
    [/event]

    [event]
        name=last breath
        [filter]
            id=Marshinar
            side=2
        [/filter]
        [filter_condition]
            [variable]
                name=justfight
                equals=yes
            [/variable]
        [/filter_condition]
        [message]
            id=Grokutin
            message= _ "Father!"
        [/message]
        [if]
            [variable]
                name=turn_number
                less_than_equal_to=5
            [/variable]
            [then]
                [set_achievement]
                    content_for=RTL_SP
                    id=RTL_marshinar
                [/set_achievement]
            [/then]
        [/if]
    [/event]

    [event]
        name=last breath
        [filter]
            id=Godian Murr
        [/filter]
        [message]
            id=Godian Murr
            message= _ "Foolish prey!

I shall return with the full might of our flight!"
        [/message]
        [message]
            speaker=Arshag
            message= _ "You won't.

You have underestimated us and now you're surrounded.
There's no escape."
        [/message]
        [kill]
            id=Godian Murr
            animate=yes
        [/kill]
        {CLEAR_VARIABLE justfight}
        [fire_event]
            name=victory
        [/fire_event]
    [/event]

    [event]
        name=outpost_phase
        id=outpost_phase
        [if]
            [have_unit]
                id=Guardian1
            [/have_unit]
            [and]
                [have_unit]
                    id=Guardian2
                [/have_unit]
            [/and]
            [then]
                [message]
                    speaker=Marshinar
                    message= _ "I shall challenge Godian to a duel.
Let us conquer one of his outposts to show your might.
Then he will not refuse."
                [/message]

                [modify_unit]
                    [filter]
                        id=Guardian1,Guardian2
                    [/filter]
                    [object]
                        id=drake_mark
                        [effect]
                            apply_to=overlay
                            add="misc/slay-icon.png"
                        [/effect]
                    [/object]
                [/modify_unit]

                [label]
                    color="221,221,221"
                    immutable=yes
                    side=2
                    text="Outpost"
                    x=8
                    y=17
                [/label]

                [label]
                    color="221,221,221"
                    immutable=yes
                    side=2
                    text="Outpost"
                    x=26
                    y=14
                [/label]

                {HINT_SLAY}
            [/then]
            [else]
                [message]
                    speaker=Marshinar
                    message= _ "I shall challenge Godian to a duel.
Yet I am weakened by my fight with you.
Protect me until I recover so I can slay him."
                [/message]
            [/else]
        [/if]
    [/event]
[/scenario]